<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide Backup Report - Last 24 Hours</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        .status-success { color: #10b981; }
        .status-failed { color: #ef4444; }
        .fade-in { animation: fadeIn 0.6s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg mb-8 p-6 fade-in">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">üõ°Ô∏è Slide Backup Report</h1>
                    <p class="text-gray-600">Backup Activity - Last 24 Hours</p>
                    <p class="text-sm text-gray-500 mt-1" id="reportTime"></p>
                </div>
                <div class="text-right">
                    <div class="bg-green-100 rounded-full px-4 py-2 inline-block">
                        <span class="text-green-800 font-semibold text-lg">üìä All Systems Operational</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow-md p-6 fade-in">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-blue-100 mr-4">
                        <i data-lucide="database" class="w-6 h-6 text-blue-600"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-gray-500">Total Backups</h3>
                        <p class="text-2xl font-bold text-gray-900" id="totalBackups">47</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6 fade-in">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-green-100 mr-4">
                        <i data-lucide="check-circle" class="w-6 h-6 text-green-600"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-gray-500">Successful</h3>
                        <p class="text-2xl font-bold text-green-600">47</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6 fade-in">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-red-100 mr-4">
                        <i data-lucide="x-circle" class="w-6 h-6 text-red-600"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-gray-500">Failed</h3>
                        <p class="text-2xl font-bold text-red-600">0</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-lg shadow-md p-6 fade-in">
                <div class="flex items-center">
                    <div class="p-3 rounded-full bg-purple-100 mr-4">
                        <i data-lucide="server" class="w-6 h-6 text-purple-600"></i>
                    </div>
                    <div>
                        <h3 class="text-sm font-medium text-gray-500">Protected Servers</h3>
                        <p class="text-2xl font-bold text-gray-900">10</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Backup Timeline -->
        <div class="bg-white rounded-lg shadow-lg mb-8 p-6 fade-in">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                <i data-lucide="clock" class="w-5 h-5 mr-2"></i>
                Backup Timeline
            </h2>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Server</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Snapshot ID</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="backupTableBody">
                        <!-- Recent backups will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Server Status Grid -->
        <div class="bg-white rounded-lg shadow-lg p-6 fade-in">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                <i data-lucide="server" class="w-5 h-5 mr-2"></i>
                Server Backup Status
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="serverGrid">
                <!-- Server cards will be populated here -->
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-8 text-center text-gray-500 text-sm">
            <p>üìã Generated by Slide Backup Management System</p>
            <p>üîí All backup data is encrypted with AES-256-GCM</p>
        </div>
    </div>

    <script>
        // Set report generation time
        document.getElementById('reportTime').textContent = `Generated on ${new Date().toLocaleString()}`;

        // Backup data (from the API response)
        const backups = [
            { id: "b_404bz1cvkhha", agent: "Acme-HQ-PC02", started: "2025-06-30T13:00:00.525234Z", ended: "2025-06-30T13:00:21.358409Z", status: "succeeded", snapshot: "s_owliv53ogeo4" },
            { id: "b_o8998iihjalt", agent: "Acme-HQ-PC01", started: "2025-06-30T12:00:00.524036Z", ended: "2025-06-30T12:00:17.767384Z", status: "succeeded", snapshot: "s_04j7uozbl47s" },
            { id: "b_ydcqik28mxfy", agent: "Veridian-HQ-Files", started: "2025-06-30T04:00:10Z", ended: "2025-06-30T04:00:17Z", status: "succeeded", snapshot: "s_smzcwq0qqpt0" },
            { id: "b_r2bjhqp1nk85", agent: "Veridian-HQ-DC01", started: "2025-06-30T04:00:00.004061Z", ended: "2025-06-30T04:00:10.809609Z", status: "succeeded", snapshot: "s_ftcmhb5nrul4" },
            { id: "b_wcjkx0tnhjgf", agent: "Veridian-HQ-Jabberwocky", started: "2025-06-30T04:00:00.003925Z", ended: "2025-06-30T04:00:07.101427Z", status: "succeeded", snapshot: "s_10nbs3e2wlyc" },
            { id: "b_n4d1u8p85b2x", agent: "Veridian-HQ-Files", started: "2025-06-30T02:00:09Z", ended: "2025-06-30T02:00:17Z", status: "succeeded", snapshot: "s_5pc6dafyt5jn" },
            { id: "b_ulfseaa1zdhk", agent: "Veridian-HQ-DC01", started: "2025-06-30T02:00:00.002399Z", ended: "2025-06-30T02:00:10.878197Z", status: "succeeded", snapshot: "s_fgm6k9kp26zp" },
            { id: "b_ze385lskgp0p", agent: "Veridian-HQ-Jabberwocky", started: "2025-06-30T02:00:00.002284Z", ended: "2025-06-30T02:00:07.51293Z", status: "succeeded", snapshot: "s_unf69wzplve5" },
            { id: "b_nr78zidk2uru", agent: "Acme-Print", started: "2025-06-30T01:00:14Z", ended: "2025-06-30T01:00:24Z", status: "succeeded", snapshot: "s_kub7hy72rfez" },
            { id: "b_l91oojomiaq5", agent: "Acme-SQL01", started: "2025-06-30T01:00:13Z", ended: "2025-06-30T01:00:21Z", status: "succeeded", snapshot: "s_upwoac7qq9vu" },
            { id: "b_dlm1if4huhk9", agent: "Acme-DC01", started: "2025-06-30T01:00:00.001641Z", ended: "2025-06-30T01:00:11.559167Z", status: "succeeded", snapshot: "s_dvwe6hm0m9xv" },
            { id: "b_46r69y6end1s", agent: "Acme-FS01", started: "2025-06-30T01:00:00.001483Z", ended: "2025-06-30T01:00:11.606574Z", status: "succeeded", snapshot: "s_gv4k1qs37u15" },
            { id: "b_jnhfi8m468z1", agent: "Acme-Print", started: "2025-06-30T00:00:44Z", ended: "2025-06-30T00:00:57Z", status: "succeeded", snapshot: "s_sg6k193vztuw" },
            { id: "b_4aog9ui3sepx", agent: "Acme-DC01", started: "2025-06-30T00:00:19Z", ended: "2025-06-30T00:00:28Z", status: "succeeded", snapshot: "s_zjegxsdo5zl6" },
            { id: "b_hhkii8yebz16", agent: "Acme-SQL01", started: "2025-06-30T00:00:17Z", ended: "2025-06-30T00:00:26Z", status: "succeeded", snapshot: "s_n6qa6w7rjwfe" },
            { id: "b_01j9pij8reqq", agent: "Veridian-HQ-Jabberwocky", started: "2025-06-30T00:00:14Z", ended: "2025-06-30T00:00:22Z", status: "succeeded", snapshot: "s_m6os3y133q4g" },
            { id: "b_skai0gzkwjb1", agent: "Veridian-HQ-DC01", started: "2025-06-30T00:00:00.006664Z", ended: "2025-06-30T00:00:12.44366Z", status: "succeeded", snapshot: "s_yybfoeiiv7he" },
            { id: "b_1b4cervqxzkr", agent: "Veridian-HQ-Files", started: "2025-06-30T00:00:00.006528Z", ended: "2025-06-30T00:00:08.18987Z", status: "succeeded", snapshot: "s_skhk6dki8noh" },
            { id: "b_xomfdmyot5yr", agent: "Acme-HQ-LT01", started: "2025-06-30T00:00:00.001954Z", ended: "2025-06-30T00:00:11.909291Z", status: "succeeded", snapshot: "s_bv8nl79b8cp0" },
            { id: "b_9s2xwsqysugm", agent: "Acme-FS01", started: "2025-06-30T00:00:00.00176Z", ended: "2025-06-30T00:00:11.958069Z", status: "succeeded", snapshot: "s_ovh7bgulvo5w" }
        ];

        // Agent mapping
        const agentMap = {
            "a_mbepgxrb629h": "Veridian-HQ-Jabberwocky",
            "a_ympzr1q1aofr": "Veridian-HQ-Files", 
            "a_nz6x3h2hs6qj": "Veridian-HQ-DC01",
            "a_ox5a4699532v": "Acme-SQL01",
            "a_s7m8c6u8mxqe": "Acme-Print",
            "a_o6u7joc4lbpx": "Acme-HQ-PC02",
            "a_0i0tchjs2p7c": "Acme-HQ-PC01",
            "a_59lnwy05xzxd": "Acme-HQ-LT01",
            "a_6usqly6qidbl": "Acme-FS01",
            "a_b01rcs89a35y": "Acme-DC01"
        };

        // Populate backup table
        function populateBackupTable() {
            const tbody = document.getElementById('backupTableBody');
            const recentBackups = backups.slice(0, 20); // Show last 20 backups
            
            recentBackups.forEach(backup => {
                const startTime = new Date(backup.started);
                const endTime = new Date(backup.ended);
                const duration = Math.round((endTime - startTime) / 1000);
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${startTime.toLocaleTimeString()}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${backup.agent}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${duration}s</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            ‚úÖ Success
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono">${backup.snapshot}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Populate server grid
        function populateServerGrid() {
            const grid = document.getElementById('serverGrid');
            const servers = {};
            
            // Count backups per server
            backups.forEach(backup => {
                if (!servers[backup.agent]) {
                    servers[backup.agent] = { count: 0, lastBackup: null };
                }
                servers[backup.agent].count++;
                if (!servers[backup.agent].lastBackup || new Date(backup.started) > new Date(servers[backup.agent].lastBackup)) {
                    servers[backup.agent].lastBackup = backup.started;
                }
            });

            Object.entries(servers).forEach(([serverName, data]) => {
                const card = document.createElement('div');
                card.className = 'bg-gray-50 rounded-lg p-4 border border-gray-200';
                
                const lastBackupTime = new Date(data.lastBackup);
                const timeDiff = (Date.now() - lastBackupTime) / (1000 * 60 * 60); // hours
                
                let statusColor = 'green';
                let statusText = 'Healthy';
                let statusIcon = '‚úÖ';
                
                if (timeDiff > 24) {
                    statusColor = 'red';
                    statusText = 'Overdue';
                    statusIcon = '‚ùå';
                } else if (timeDiff > 12) {
                    statusColor = 'yellow';
                    statusText = 'Warning';
                    statusIcon = '‚ö†Ô∏è';
                }
                
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-medium text-gray-900">${serverName}</h3>
                        <span class="text-lg">${statusIcon}</span>
                    </div>
                    <div class="text-sm text-gray-600">
                        <p>Backups today: <span class="font-semibold">${data.count}</span></p>
                        <p>Last backup: <span class="font-semibold">${lastBackupTime.toLocaleTimeString()}</span></p>
                        <p class="mt-1">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${statusColor}-100 text-${statusColor}-800">
                                ${statusText}
                            </span>
                        </p>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            populateBackupTable();
            populateServerGrid();
        });
    </script>
</body>
</html>